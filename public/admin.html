<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ShopHub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Admin Access Check -->
    <script>
        const userRole = localStorage.getItem('role');
        if (userRole !== 'admin') {
            alert('Access Denied: Admins only.');
            window.location.href = 'login.html';
        }
    </script>

    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="home.html" class="logo">üõçÔ∏è ShopHub</a>
                
                <nav class="nav">
                    <ul class="nav-links">
                        <li><a href="home.html">Home</a></li>
                        <li><a href="product.html">Products</a></li>
                        <li><a href="cart.html">Cart <span class="cart-count">0</span></a></li>
                        <li><a href="profile.html">Profile</a></li>
                        <li><a href="admin.html" class="active">Admin</a></li>
                    </ul>
                    
                    <div class="nav-actions">
                        <span style="color: var(--text-secondary); font-size: 0.875rem;">Admin Panel</span>
                        <a href="login.html" class="btn btn-outline btn-sm" onclick="localStorage.clear()">Logout</a>
                    </div>
                </nav>
                
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h1>Admin Dashboard</h1>
                <div>
                    <button class="btn btn-outline btn-sm" onclick="refreshData()">üîÑ Refresh</button>
                    <button class="btn btn-secondary btn-sm" onclick="exportLogs()">üìä Export Logs</button>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="grid grid-4" style="margin-bottom: 3rem;">
                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 0.5rem;">1,234</div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Total Users</div>
                    <div style="font-size: 0.8rem; color: var(--success); margin-top: 0.25rem;">+12% this month</div>
                </div>
                
                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: var(--success); margin-bottom: 0.5rem;">567</div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Orders Today</div>
                    <div style="font-size: 0.8rem; color: var(--warning); margin-top: 0.25rem;">+3% from yesterday</div>
                </div>
                
                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: var(--accent); margin-bottom: 0.5rem;">$45K</div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Revenue Today</div>
                    <div style="font-size: 0.8rem; color: var(--success); margin-top: 0.25rem;">+8% from yesterday</div>
                </div>
                
                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: var(--error); margin-bottom: 0.5rem;">23</div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary);">Security Alerts</div>
                    <div style="font-size: 0.8rem; color: var(--error); margin-top: 0.25rem;">‚ö†Ô∏è Requires attention</div>
                </div>
            </div>

            <div class="grid grid-3" style="gap: 2rem;">
                <!-- User Management -->
                <div style="grid-column: 1 / 3;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Recent User Activity</h3>
                            <div>
                                <select class="form-control" style="width: auto; margin-bottom: 0;">
                                    <option>Last 24 hours</option>
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                </select>
                            </div>
                        </div>

                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 2px solid var(--border);">
                                        <th style="text-align: left; padding: 0.75rem; font-weight: 600;">User</th>
                                        <th style="text-align: left; padding: 0.75rem; font-weight: 600;">Action</th>
                                        <th style="text-align: left; padding: 0.75rem; font-weight: 600;">IP Address</th>
                                        <th style="text-align: left; padding: 0.75rem; font-weight: 600;">Time</th>
                                        <th style="text-align: left; padding: 0.75rem; font-weight: 600;">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="user-activity-table"></tbody>
                            </table>
                        </div>

                        <div style="margin-top: 1rem; text-align: center;">
                            <button class="btn btn-outline" onclick="loadMoreActivity()">Load More</button>
                        </div>
                    </div>

                    <!-- Security Logs -->
                    <div class="card" style="margin-top: 2rem;">
                        <div class="card-header">
                            <h3 class="card-title">üö® Security Alerts</h3>
                            <button class="btn btn-outline btn-sm" onclick="clearAlerts()">Clear All</button>
                        </div>
                        <div id="security-alerts"></div>
                    </div>
                </div>

                <!-- Sidebar Controls -->
                <div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">System Status</h3>
                        </div>
                        <div style="space-y: 1rem;">
                            <div style="display: flex; justify-content: space-between;"><span>Database</span><span style="color: var(--success);">‚óè Online</span></div>
                            <div style="display: flex; justify-content: space-between;"><span>Payment Gateway</span><span style="color: var(--success);">‚óè Online</span></div>
                            <div style="display: flex; justify-content: space-between;"><span>Email Service</span><span style="color: var(--warning);">‚óè Degraded</span></div>
                            <div style="display: flex; justify-content: space-between;"><span>CDN</span><span style="color: var(--success);">‚óè Online</span></div>
                            <div style="display: flex; justify-content: space-between;"><span>Honeypot Traps</span><span style="color: var(--success);">‚óè Active</span></div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card" style="margin-top: 1rem;">
                        <div class="card-header">
                            <h3 class="card-title">Quick Actions</h3>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary" style="width: 100%; margin-bottom: 0.5rem;">üë• Manage Users</button>
                            <button class="btn btn-secondary" style="width: 100%; margin-bottom: 0.5rem;">üì¶ View Orders</button>
                            <button class="btn btn-secondary" style="width: 100%; margin-bottom: 0.5rem;">üõçÔ∏è Manage Products</button>
                            <button class="btn btn-outline" style="width: 100%; margin-bottom: 0.5rem;">‚öôÔ∏è System Settings</button>
                            <button class="btn btn-outline text-error" style="width: 100%; border-color: var(--error); color: var(--error);">üö® Emergency Mode</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 ShopHub Admin Panel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        const mockUserActivity = [
            { user: 'john.doe@example.com', action: 'Login', ip: '192.168.1.100', time: '2 min ago', status: 'success' },
            { user: 'jane.smith@example.com', action: 'Purchase', ip: '203.0.113.45', time: '5 min ago', status: 'success' },
            { user: 'suspicious@temp.com', action: 'Failed Login (5x)', ip: '198.51.100.10', time: '8 min ago', status: 'blocked' }
        ];
        const mockSecurityAlerts = [
            { type: 'warning', message: 'Multiple failed login attempts from IP 198.51.100.10', time: '3 min ago' },
            { type: 'error', message: 'Suspected bot activity detected', time: '7 min ago' }
        ];
        function populateUserActivity() {
            const table = document.getElementById('user-activity-table');
            table.innerHTML = mockUserActivity.map(a => `
                <tr>
                    <td>${a.user}</td>
                    <td>${a.action}</td>
                    <td>${a.ip}</td>
                    <td>${a.time}</td>
                    <td>${a.status}</td>
                </tr>`).join('');
        }
        function populateSecurityAlerts() {
            const container = document.getElementById('security-alerts');
            container.innerHTML = mockSecurityAlerts.map(alert => `<div>${alert.message} - ${alert.time}</div>`).join('');
        }
        document.addEventListener('DOMContentLoaded', () => {
            populateUserActivity();
            populateSecurityAlerts();
        });
    </script>
</body>
</html>
